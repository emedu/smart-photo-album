# 🚀 系統啟動檢查清單

**日期**: 2025-12-29  
**狀態**: 準備啟動

---

## ✅ 環境檢查

- [x] **Node.js**: v24.11.1 ✅ (需求: v18+)
- [x] **npm**: v11.6.2 ✅ (需求: v9+)
- [x] **依賴套件**: 已安裝 (131 packages)
- [x] **專案結構**: 完整
  - [x] server.js
  - [x] routes/ (3 個檔案)
  - [x] services/ (3 個檔案)
  - [x] utils/ (3 個檔案)
  - [x] public/ (8 個檔案)

---

## ⚠️ 待完成項目

### 1. 建立 .env 檔案

**狀態**: ❌ 尚未建立

**操作步驟**:
```bash
# 在專案根目錄執行
copy .env.example .env
```

然後編輯 `.env` 檔案,填入以下資訊:

```env
# Google Photos API (需要申請)
GOOGLE_CLIENT_ID=你的_Client_ID
GOOGLE_CLIENT_SECRET=你的_Client_Secret
GOOGLE_REDIRECT_URI=http://localhost:3001/auth/callback

# Gemini API (需要申請)
GEMINI_API_KEY=你的_Gemini_API_金鑰

# 伺服器設定
PORT=3000
NODE_ENV=development
SESSION_SECRET=請輸入任意隨機字串
```

---

### 2. 申請 API 金鑰

#### Google Photos API

**步驟**:
1. 前往 [Google Cloud Console](https://console.cloud.google.com/)
2. 建立新專案
3. 啟用「Photos Library API」
4. 建立 OAuth 2.0 憑證
5. 取得 Client ID 和 Client Secret

**詳細指南**: 參考 `專案文件_ProjectDocs/API金鑰申請完整指南.md`

#### Gemini API

**步驟**:
1. 前往 [Google AI Studio](https://aistudio.google.com/)
2. 點擊「Get API Key」
3. 建立 API 金鑰
4. 複製金鑰

---

## 🎯 啟動步驟

### 選項 A: 完整測試 (建議)

**前提**: 已申請 API 金鑰並設定 .env

```bash
# 1. 啟動伺服器
npm start

# 2. 開啟瀏覽器
# 前往 http://localhost:3001

# 3. 測試流程
# - 點擊「連接 Google Photos」
# - 完成 Google 授權
# - 選擇測試相簿 (建議 < 20 張照片)
# - 設定評分門檻
# - 開始分析
# - 查看結果
```

---

### 選項 B: 先測試伺服器啟動

**前提**: 可以先不設定 API 金鑰

```bash
# 1. 建立空的 .env 檔案
copy .env.example .env

# 2. 啟動伺服器
npm start

# 3. 測試健康檢查
# 開啟瀏覽器前往: http://localhost:3001/health
# 應該會看到: {"status":"ok","timestamp":"...","environment":"development"}
```

---

## 📋 測試檢查清單

### 基本功能測試

- [ ] 伺服器成功啟動
- [ ] 健康檢查端點正常 (`/health`)
- [ ] 主頁面載入成功 (`/`)
- [ ] CSS 樣式正確顯示

### OAuth 認證測試

- [ ] 點擊登入按鈕
- [ ] 重新導向至 Google 授權頁面
- [ ] 授權成功
- [ ] 重新導向至 dashboard.html

### 相簿功能測試

- [ ] 相簿清單載入成功
- [ ] 相簿卡片顯示正確
- [ ] 點擊相簿可選擇
- [ ] 設定面板顯示

### 分析功能測試

- [ ] 開始分析成功
- [ ] 進度頁面載入
- [ ] 進度圓環更新
- [ ] SSE 連線正常
- [ ] 階段文字更新

### 結果展示測試

- [ ] 結果頁面載入
- [ ] 統計資訊正確
- [ ] 新相簿連結有效
- [ ] 可前往 Google Photos

---

## 🐛 常見問題

### Q1: 伺服器無法啟動

**錯誤**: `Error: Cannot find module 'express'`

**解決**:
```bash
npm install
```

---

### Q2: .env 檔案找不到

**錯誤**: 環境變數未定義

**解決**:
```bash
copy .env.example .env
```

---

### Q3: OAuth 授權失敗

**錯誤**: 重新導向 URI 不符

**解決**:
1. 檢查 `.env` 中的 `GOOGLE_REDIRECT_URI`
2. 確認為: `http://localhost:3001/auth/callback`
3. 與 Google Cloud Console 設定一致

---

### Q4: Gemini API 錯誤

**錯誤**: 403 Forbidden

**解決**:
1. 確認 API 金鑰正確
2. 檢查 Google AI Studio 配額
3. 確認已啟用 Generative Language API

---

## 📊 預期結果

### 伺服器啟動成功

```
╔═══════════════════════════════════════════════════════════╗
║                                                           ║
║   🎨 智慧相簿自動過濾與管理系統                            ║
║   Smart Photo Album Filter System                        ║
║                                                           ║
║   🚀 伺服器已啟動                                          ║
║   📍 http://localhost:3001                                ║
║   🌍 環境: development                                    ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝

✅ 可用的端點:
   - GET  /                    主頁面
   - GET  /health              健康檢查
   - GET  /auth/login          Google 登入
   - GET  /auth/callback       OAuth 回調
   - GET  /api/albums          取得相簿清單
   - POST /api/analysis/start  開始分析
```

---

## 🎉 成功指標

- ✅ 伺服器在 http://localhost:3001 運行
- ✅ 主頁面正常顯示
- ✅ 可以完成 Google 授權
- ✅ 可以看到相簿清單
- ✅ 可以開始分析
- ✅ 可以看到分析結果
- ✅ 新相簿成功建立在 Google Photos

---

## 📞 需要協助?

如果遇到問題,請參考:

1. **快速開始指南**: `快速開始指南.md`
2. **技術手冊**: `專案文件_ProjectDocs/03_技術手冊.md`
3. **開發問答**: `專案文件_ProjectDocs/04_開發問答與學習筆記.md`
4. **API 申請指南**: `專案文件_ProjectDocs/API金鑰申請完整指南.md`

---

## 下一步建議

### 現在可以做:

1. **選項 A**: 先申請 API 金鑰 (約 30-40 分鐘)
   - 參考 `API金鑰申請完整指南.md`
   - 完成後設定 `.env`
   - 啟動完整測試

2. **選項 B**: 先測試伺服器啟動
   - 建立空的 `.env`
   - 執行 `npm start`
   - 確認伺服器正常運作
   - 稍後再申請 API 金鑰

---

**建議**: 先執行選項 B,確認系統正常運作,再進行 API 申請。

**準備好了嗎?** 🚀
