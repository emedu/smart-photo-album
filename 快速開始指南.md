# 智慧相簿系統 - 快速開始指南

**版本**: 1.0.0  
**建立日期**: 2025-12-29

---

## 🎯 系統已完成!

恭喜!您的智慧相簿自動過濾與管理系統已經建立完成。以下是啟動與使用的完整指南。

---

## 📋 開始前的準備

### 1. 確認環境

請確認您已安裝:
- ✅ Node.js v18+ (執行 `node -v` 檢查)
- ✅ npm v9+ (執行 `npm -v` 檢查)
- ✅ Git (執行 `git --version` 檢查)

### 2. 申請 API 金鑰

**重要**: 系統需要兩組 API 金鑰才能運作!

#### Google Photos API
1. 前往 [Google Cloud Console](https://console.cloud.google.com/)
2. 建立新專案
3. 啟用「Photos Library API」
4. 建立 OAuth 2.0 憑證
5. 取得 Client ID 和 Client Secret

#### Gemini API
1. 前往 [Google AI Studio](https://aistudio.google.com/)
2. 點擊「Get API Key」
3. 建立 API 金鑰
4. 複製金鑰

**詳細步驟**: 請參考 `專案文件_ProjectDocs/API金鑰申請完整指南.md`

---

## 🚀 啟動步驟

### Step 1: 設定環境變數

1. 複製環境變數範本:
```bash
copy .env.example .env
```

2. 編輯 `.env` 檔案,填入您的 API 金鑰:
```env
# Google Photos API
GOOGLE_CLIENT_ID=您的_Client_ID
GOOGLE_CLIENT_SECRET=您的_Client_Secret
GOOGLE_REDIRECT_URI=http://localhost:3001/auth/callback

# Gemini API
GEMINI_API_KEY=您的_Gemini_API_金鑰

# 伺服器設定
PORT=3000
NODE_ENV=development
SESSION_SECRET=請輸入隨機字串
```

### Step 2: 啟動伺服器

```bash
npm start
```

您應該會看到:
```
╔═══════════════════════════════════════════════════════════╗
║                                                           ║
║   🎨 智慧相簿自動過濾與管理系統                            ║
║   Smart Photo Album Filter System                        ║
║                                                           ║
║   🚀 伺服器已啟動                                          ║
║   📍 http://localhost:3001                                ║
║   🌍 環境: development                                    ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

### Step 3: 開啟瀏覽器

前往 http://localhost:3001

---

## 📱 使用流程

### 1. 登入授權
- 點擊「連接 Google Photos」
- 使用 Google 帳號登入
- 授權應用程式存取您的 Google Photos

### 2. 選擇相簿
- 瀏覽您的相簿清單
- 點擊要分析的相簿
- 設定評分門檻:
  - 照片門檻 (預設 85 分)
  - 影片門檻 (預設 80 分)

### 3. 開始分析
- 點擊「開始分析」
- 系統會顯示即時進度
- 等待 AI 完成分析 (時間視相簿大小而定)

### 4. 查看結果
- 查看分析統計資訊
- 點擊連結前往新建立的精選相簿
- 所有精選內容已自動儲存至您的 Google Photos

---

## 🎨 功能特色

### AI 智慧分析
- **照片評分**: 構圖、曝光、清晰度、色彩
- **影片評分**: 動態品質、精彩程度、音訊品質
- **自動去重**: 連拍照片自動保留最佳一張

### 使用者體驗
- **即時進度**: Server-Sent Events 即時更新
- **現代化 UI**: 玻璃擬態設計
- **響應式設計**: 支援手機、平板、電腦

### 安全性
- **OAuth 2.0**: Google 官方認證
- **資料保密**: 不儲存任何照片或個人資料
- **環境變數**: API 金鑰安全保護

---

## ⚠️ 注意事項

### API 配額限制

#### Google Photos API
- 每日請求數: 10,000 次
- 單次查詢: 最多 100 個項目
- **建議**: 單次處理不超過 500 個項目

#### Gemini API
- Flash 模型: 每分鐘 15 次請求
- Pro 模型: 每分鐘 2 次請求
- **建議**: 使用免費配額測試

### 處理時間估算

- **小型相簿** (< 50 項目): 約 1-2 分鐘
- **中型相簿** (50-200 項目): 約 5-10 分鐘
- **大型相簿** (200-500 項目): 約 15-30 分鐘

### 最佳實踐

1. **測試相簿**: 先用小型相簿測試功能
2. **評分門檻**: 根據需求調整 (85 分較嚴格)
3. **網路穩定**: 確保網路連線穩定
4. **耐心等候**: 大型相簿需要較長時間

---

## 🔧 故障排除

### 問題 1: 伺服器無法啟動

**錯誤**: `Error: Cannot find module 'express'`

**解決**:
```bash
npm install
```

---

### 問題 2: OAuth 授權失敗

**錯誤**: 重新導向 URI 不符

**解決**:
1. 檢查 `.env` 中的 `GOOGLE_REDIRECT_URI`
2. 確認與 Google Cloud Console 設定一致
3. 應為: `http://localhost:3001/auth/callback`

---

### 問題 3: Gemini API 錯誤

**錯誤**: 403 Forbidden

**解決**:
1. 確認 API 金鑰正確
2. 檢查 Google AI Studio 配額
3. 確認已啟用 Generative Language API

---

### 問題 4: 分析卡住不動

**原因**: 可能是 API 限制或網路問題

**解決**:
1. 重新整理頁面
2. 檢查伺服器終端機的錯誤訊息
3. 確認網路連線
4. 減少相簿項目數量

---

## 📊 專案結構

```
智慧相簿自動過濾與管理系統/
├── server.js              # 伺服器主程式
├── package.json           # 專案配置
├── .env                   # 環境變數 (需自行建立)
├── .env.example           # 環境變數範本
│
├── public/                # 前端檔案
│   ├── index.html        # 主頁面
│   ├── dashboard.html    # 相簿選擇
│   ├── analysis.html     # 分析進度
│   ├── results.html      # 結果展示
│   ├── css/
│   │   └── styles.css    # 樣式表
│   └── js/
│       ├── auth.js       # 認證邏輯
│       ├── app.js        # 主應用
│       └── analysis.js   # 分析邏輯
│
├── routes/                # API 路由
│   ├── auth.js           # 認證路由
│   ├── albums.js         # 相簿路由
│   └── analysis.js       # 分析路由
│
├── services/              # 業務邏輯
│   ├── googlePhotos.js   # Google Photos 服務
│   ├── geminiAI.js       # Gemini AI 服務
│   └── albumProcessor.js # 相簿處理
│
└── utils/                 # 工具函式
    ├── errorHandler.js   # 錯誤處理
    ├── validators.js     # 輸入驗證
    └── logger.js         # 日誌記錄
```

---

## 📚 相關文檔

- [執行計畫](./專案文件_ProjectDocs/01_執行計畫.md) - 專案規劃與功能規格
- [技術手冊](./專案文件_ProjectDocs/03_技術手冊.md) - 系統架構與 API 文件
- [開發問答](./專案文件_ProjectDocs/04_開發問答與學習筆記.md) - 常見問題與解決方案
- [API 申請指南](./專案文件_ProjectDocs/API金鑰申請完整指南.md) - 詳細申請步驟

---

## 🎉 開始使用

一切準備就緒!現在您可以:

1. ✅ 啟動伺服器: `npm start`
2. ✅ 開啟瀏覽器: http://localhost:3001
3. ✅ 登入 Google Photos
4. ✅ 開始分析您的相簿!

**祝您使用愉快!** 🚀

---

**文件版本**: 1.0  
**最後更新**: 2025-12-29  
**技術支援**: 請參考專案文檔或 GitHub Issues
